<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stock Analyzer — Inputs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; background:#0f172a; color:#e5e7eb; }
    .wrap { max-width: 720px; margin: 40px auto; padding: 24px; background:#111827; border:1px solid #1f2937; border-radius:16px; }
    h1 { margin: 0 0 12px; font-size: 22px; }
    p.hint { margin: 4px 0 20px; color:#9ca3af; font-size: 14px; }
    .grid { display: grid; gap: 16px; grid-template-columns: 1fr; }
    @media (min-width: 640px){ .grid { grid-template-columns: 1fr 1fr 1fr; } }
    label { display:block; font-size:13px; color:#cbd5e1; margin-bottom:6px; }
    input[type="text"], input[type="number"], select {
      width: 100%; padding: 10px 12px; border-radius: 10px; border:1px solid #334155; background:#0b1220; color:#e5e7eb;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    .actions { margin-top: 18px; display:flex; gap:10px; align-items:center; }
    button {
      padding: 10px 16px; border-radius: 10px; border:1px solid #22d3ee; background:#0ea5b7; color:#05151a;
      font-weight: 600; cursor: pointer;
    }
    button:hover { filter: brightness(1.05); }
    .note { font-size: 12px; color:#9ca3af; }
    .divider { height:1px; background:#1f2937; margin:24px 0; }
    .chart {
      width:100%; min-height: 360px; display:grid; place-items:center; border-radius: 14px;
      border:1px dashed #334155; background: repeating-linear-gradient(135deg, #0b1220 0 16px, #0c1624 16px 32px);
      color:#64748b;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Stock Analyzer — Inputs</h1>
    <p class="hint">Enter your parameters and click <strong>Run Analysis</strong>. The server will render a chart and provide CSV exports.</p>

    <!-- Use GET so results are reproducible via the URL query string -->
    <form action="/" method="get" novalidate>
      <div class="grid">
        <!-- Ticker -->
        <div>
          <label for="ticker">Ticker</label>
          <input
            id="ticker"
            name="ticker"
            type="text"
            inputmode="latin"
            placeholder="AAPL"
            pattern="^[A-Za-z.\-]{1,10}$"
            title="Use letters, dot or dash (e.g., AAPL, BRK.B, TSLA)"
            required />
        </div>

        <!-- Duration -->
        <div>
          <label for="duration">Duration</label>
          <select id="duration" name="duration" required>
            <option value="1mo">1 month</option>
            <option value="3mo">3 months</option>
            <option value="6mo">6 months</option>
            <option value="1y">1 year</option>
            <option value="2y">2 years</option>
            <option value="3y" selected>3 years</option>
          </select>
        </div>

        <!-- SMA period -->
        <div>
          <label for="sma">SMA Period</label>
          <input
            id="sma"
            name="sma"
            type="number"
            min="2"
            max="400"
            step="1"
            placeholder="20"
            required />
        </div>
      </div>

      <div class="actions">
        <button type="submit">Run Analysis</button>
        <span class="note">Tip: results will appear below; exports show after a successful run.</span>
      </div>
    </form>

    <div class="divider"></div>

    <!-- Placeholder area where you’ll inject the rendered plot (e.g., base64 PNG) -->
    <div class="chart">
      <em>Chart will appear here after you run the analysis.</em>
      <!-- Example when ready:
      <img alt="Price & SMA" src="data:image/png;base64, {{ chart_png_base64 }}" />
      -->
    </div>

    <!-- Optional: show summary table + export buttons beneath the chart after processing -->
    <!--
    <div class="actions" style="justify-content: flex-end; margin-top:14px;">
      <a href="/export?type=timeseries" class="btn">Download Timeseries CSV</a>
      <a href="/export?type=transactions" class="btn">Download Transactions CSV</a>
      <a href="/export?type=summary" class="btn">Download Summary JSON</a>
      <a href="/export?type=all" class="btn">Download All (ZIP)</a>
    </div>
    -->
  </div>
</body>
</html>
